{"version":3,"file":"tradingview-widget.mjs","sources":["../../../projects/tradingview-widget/src/lib/tradingview-widget.service.ts","../../../projects/tradingview-widget/src/lib/tradingview-widget.model.ts","../../../projects/tradingview-widget/src/lib/tradingview-widget.component.ts","../../../projects/tradingview-widget/src/lib/tradingview-widget.module.ts","../../../projects/tradingview-widget/src/public-api.ts","../../../projects/tradingview-widget/src/tradingview-widget.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TradingviewWidgetService {\n\n  constructor() { }\n}\n","export enum BarStyles {\r\n  BARS = '0',\r\n  CANDLES = '1',\r\n  HOLLOW_CANDLES = '9',\r\n  HEIKIN_ASHI = '8',\r\n  LINE = '2',\r\n  AREA = '3',\r\n  RENKO = '4',\r\n  LINE_BREAK = '7',\r\n  KAGI = '5',\r\n  POINT_AND_FIGURE = '6'\r\n}\r\n\r\nexport enum IntervalTypes {\r\n  D = 'D',\r\n  W = 'W'\r\n};\r\n\r\nexport enum RangeTypes {\r\n  YTD = 'ytd',\r\n  ALL = 'all'\r\n};\r\n\r\nexport enum Themes {\r\n  LIGHT = 'Light',\r\n  DARK = 'Dark'\r\n};\r\n\r\n\r\n\r\nexport const SCRIPT_ID = 'tradingview-widget-script';\r\nexport const CONTAINER_ID = `tradingview-widget-${Math.random()}`;\r\n\r\nexport interface ITradingViewWidget {\r\n  allow_symbol_change?: boolean;\r\n  autosize?: boolean;\r\n  calendar?: boolean;\r\n  details?: boolean;\r\n  enable_publishing?: boolean;\r\n  height?: number;\r\n  hideideas?: boolean;\r\n  hide_legend?: boolean;\r\n  hide_side_toolbar?: boolean;\r\n  hide_top_toolbar?: boolean;\r\n  hotlist?: boolean;\r\n  interval?:\r\n  '1' |\r\n  '3' |\r\n  '5' |\r\n  '15' |\r\n  '30' |\r\n  '60' |\r\n  '120' |\r\n  '180' |\r\n  IntervalTypes.D |\r\n  IntervalTypes.W;\r\n  locale?: string;\r\n  news?: string[];\r\n  no_referral_id?: boolean;\r\n  popup_height?: number | string;\r\n  popup_width?: number | string;\r\n  referral_id?: string;\r\n  range?:\r\n  '1d' |\r\n  '5d' |\r\n  '1m' |\r\n  '3m' |\r\n  '6m' |\r\n  RangeTypes.YTD |\r\n  '12m' |\r\n  '60m' |\r\n  RangeTypes.ALL;\r\n  save_image?: boolean;\r\n  show_popup_button?: boolean;\r\n  studies?: string[];\r\n  style?: BarStyles.BARS |\r\n  BarStyles.CANDLES |\r\n  BarStyles.HOLLOW_CANDLES |\r\n  BarStyles.HEIKIN_ASHI |\r\n  BarStyles.LINE |\r\n  BarStyles.AREA |\r\n  BarStyles.RENKO |\r\n  BarStyles.LINE_BREAK |\r\n  BarStyles.KAGI |\r\n  BarStyles.POINT_AND_FIGURE;\r\n  symbol?: string;\r\n  theme?: Themes.LIGHT | Themes.DARK;\r\n  timezone?: string;\r\n  toolbar_bg?: string;\r\n  watchlist?: string[];\r\n  widgetType?: string;\r\n  width?: number;\r\n  withdateranges?: boolean;\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\nimport { BarStyles, CONTAINER_ID, IntervalTypes, ITradingViewWidget, SCRIPT_ID, Themes } from './tradingview-widget.model';\n\ndeclare const TradingView: any;\n\n@Component({\n  selector: 'tradingview-widget',\n  template: `\n    <section [id]=\"containerId\"> </section>\n  `,\n  styles: []\n})\nexport class TradingviewWidgetComponent implements OnInit {\n\n  private _widgetConfig: ITradingViewWidget = {};\n  private _defaultConfig: ITradingViewWidget = {\n    symbol: 'NASDAQ:AAPL',\n    allow_symbol_change: true,\n    autosize: false,\n    enable_publishing: false,\n    height: 610,\n    hideideas: true,\n    hide_legend: false,\n    hide_side_toolbar: true,\n    hide_top_toolbar: false,\n    interval: IntervalTypes.D,\n    locale: 'en',\n    save_image: true,\n    show_popup_button: false,\n    style: BarStyles.CANDLES,\n    theme: Themes.LIGHT,\n    timezone: 'Etc/UTC',\n    toolbar_bg: '#F1F3F6',\n    widgetType: 'widget',\n    width: 980,\n    withdateranges: false\n  };\n\n  style: {} = {};\n  containerId = CONTAINER_ID;\n\n  @Input('widgetConfig') set widgetConfig(value: ITradingViewWidget) {\n    this._widgetConfig = value;\n    this.cleanWidget();\n    this.initWidget();\n  }\n\n  get widgetConfig(): ITradingViewWidget {\n    return this._widgetConfig || this._defaultConfig;\n  }\n\n  constructor() { }\n\n  ngOnInit(): void {\n    this.appendScript(this.initWidget.bind(this));\n  }\n\n  initWidget() {\n    /* global TradingView */\n    if (typeof TradingView === 'undefined' || !this.getContainer()) return;\n\n    const { widgetType, ...widgetConfig } = this.widgetConfig;\n    const config = { ...widgetConfig, container_id: this.containerId };\n\n    if (config.autosize) {\n      delete config.width;\n      delete config.height;\n    }\n\n\n    if (config.popup_width && typeof config.popup_width === 'number') {\n      config.popup_width = config.popup_width.toString();\n    }\n\n    if (config.popup_height && typeof config.popup_height === 'number') {\n      config.popup_height = config.popup_height.toString();\n    }\n\n    if (config.autosize) {\n      this.style = {\n        width: '100%',\n        height: '100%'\n      };\n    }\n    /* global TradingView */\n    new TradingView[widgetType!](config);\n  };\n\n  appendScript(onload : any) {\n    if (!this.canUseDOM()) {\n      onload();\n      return;\n    }\n\n    if (this.scriptExists()) {\n      /* global TradingView */\n      if (typeof TradingView === 'undefined') {\n        this.updateOnloadListener(onload);\n        return;\n      }\n      onload();\n      return;\n    }\n    const script = document.createElement('script');\n    script.id = SCRIPT_ID;\n    script.type = 'text/javascript';\n    script.async = true;\n    script.src = 'https://s3.tradingview.com/tv.js';\n    script.onload = onload;\n    document.getElementsByTagName('head')[0].appendChild(script);\n  };\n\n  canUseDOM() {\n    return typeof window !== 'undefined' &&\n      window.document &&\n      window.document.createElement\n  }\n\n  scriptExists() {\n    return this.getScriptElement() !== null;\n  }\n\n  updateOnloadListener(onload: any) {\n    const script = this.getScriptElement();\n    const oldOnload: any = script!.onload!.bind(script!);\n    return script!.onload = () => {\n      oldOnload();\n      onload();\n    };\n  };\n\n  getScriptElement() {\n    return document.getElementById(SCRIPT_ID);\n  }\n\n  cleanWidget() {\n    if (!this.canUseDOM()) return;\n    const container = this.getContainer();\n    if (container) {\n      container.innerHTML = '';\n    }\n  };\n\n  getContainer() {\n    return document.getElementById(this.containerId);\n  }\n\n\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { TradingviewWidgetComponent } from './tradingview-widget.component';\n\n\n\n@NgModule({\n  declarations: [TradingviewWidgetComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [TradingviewWidgetComponent],\n  providers: []\n})\nexport class TradingviewWidgetModule { }\n","/*\n * Public API Surface of tradingview-widget\n */\n\nexport * from './lib/tradingview-widget.service';\nexport * from './lib/tradingview-widget.component';\nexport * from './lib/tradingview-widget.module';\nexport * from './lib/tradingview-widget.model';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}